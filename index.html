<html>
  <head>
    <meta charset="utf-8" /> 
    <title>Sudoku</title>
    <!-- <h1>Sudoku</h1> -->
    <!-- <link type="text/scss" href="./src/styles/index.scss" rel="stylesheet/scss"> -->
    <link type="text/css" rel="stylesheet" href="./dist/main.css" />
    <!-- <script type="text/javascript" src="./index.js"></script> -->
  </head>
  <body>
    <script src="./dist/main.js"></script>
  
  <div class="sidePanel">
    <h1>Sudoku</h1>
    <a href="https://github.com/rahulj93/JavaScript-Project---Sudoku">GitHub</a>
    <br></br>
    <a href="https://www.linkedin.com/in/rahul-jain-ny">LinkedIn</a>
  </div>
  
  <canvas id="myCanvas" width="540" height="540">
    <!-- <canvas id="subCanvas" width="180" height="180"></canvas> -->
  </canvas>

  <div class="sidePanel">
    <h2>Instructions</h2>
      <ol>
        <li>Fill in rows and columns with numbers 1-9</li>
        <li>Fill in 3x3 boxes with numbers 1-9</li>
      </ol>
    <h2>Stats</h2>
    <!-- <br></br> -->
    <p>Score: </p>
    <p>Time: </p>
    <button><a href="file:///Users/rahuljain/Desktop/for%20GItHub/JavaScriptProject/Sudoku/index.html">Reset Board</a></button>
  </div>
  
  <div>
    
    <script>
      // JavaScript code goes here
      let canvas = document.getElementById("myCanvas");
      let ctx = canvas.getContext("2d");     

      function generateNum() {
        let num = Math.ceil(Math.random() * 9);
        console.log(num); 
        return num;
      }
  
      function drawSmallBox(left, right, top, bottom) {
        let count = 1;
        ctx.beginPath();
        // ctx.lineWidth = 10;

        let row1 = []; 
        let row2 = []; 
        let row3 = []; 

        ctx.font = "20px Arial";
        ctx.strokeStyle = "rgba(0,0,255,0.5)";
        for (b = left; b < right; b += 180) {
          ctx.stroke();
          let box = [];
          for (x = b; x < b + 180; x += 60) {
            console.log(`column ${count}`); count++;
            let col = [];
            for (y = top; y < bottom; y += 60) {
              ctx.rect(x, y, 60, 60);
              let num = generateNum();
              if (!col.includes(num) && !box.includes(num)) {
                col.push(num); box.push(num);
                ctx.fillText(num, x + 25, y + 45);
              } else {
                col.push(""); box.push("");
              }
              ctx.stroke();
              ctx.closePath();
            }

            if (!row1.includes(col[0])) {
              row1.push(col[0]);
            };
            if (!row2.includes(col[1])) {
              row2.push(col[1]);
            };
            if (!row3.includes(col[2])) {
              row3.push(col[2]);
            };
            // if (!this.row1.includes(col[0])) {
            //   this.row1.push(col[0]);
            // };
            // if (!this.row2.includes(col[1])) {
            //   this.row2.push(col[1]);
            // };
            // if (!this.row3.includes(col[2])) {
            //   this.row3.push(col[2]);
            // };
          }
          console.log(`Row 1: ${row1}`);
          console.log(`Row 2: ${row2}`);
          console.log(`Row 3: ${row3}`);
          // console.log(`Box: ${box}`);
          console.log(`box between left, ${left}, and right, ${right}, complete! with: [${box}]`);
        }
      }
      function drawLargeBox() {
        for (left=0; left< 540; left+=180) {
            drawSmallBox(left, left+180, 0, 180);
            drawSmallBox(left, left+180, 180, 360);
            drawSmallBox(left, left+180, 360, 540);
            // console.log(drawSmallBox.row1)
        }
      };



  function parsify(arr) {
    let obj = {};
    arr.forEach(el => {
      obj[el] = true;
    })
    newArr = [];
    Object.keys(obj).forEach(key => {
      key.split(',').forEach(el => {
        newArr.push(parseInt(el));
      })
    })
    return newArr;
  }

  function drawRect() {

    let count = 1;

    let row1 = [];
    let row2 = [];
    let row3 = [];
    let row4 = [];
    let row5 = [];
    let row6 = [];
    let row7 = [];
    let row8 = [];
    let row9 = [];
    let column1 = [];
    let column2 = [];
    let column3 = [];
    let column4 = [];
    let column5 = [];
    let column6 = [];
    let column7 = [];
    let column8 = [];
    let column9 = [];

    let c = 0;

    ctx.beginPath();

    for (large = 0; large < 540; large += 180) {
      console.log('W    T     F');
      // this is the entire left side 3 boxes down: 


      for (b = 0; b < 180; b += 180) {
        ctx.stroke();
        let box = [];

        // this is one box: 

        let checkpoint = 0;

        for (x = b; x < b + 180; x += 60) {
          console.log(`column ${count}`); count++;
          let col = [];

          // this goes across the x axis 3 spaces and generates each little column in the smallbox. 
          checkpoint++;

          for (y = large; y < (large + 180); y += 60) {

            // this goes down the y axis (one 3x3 box at a time) and adds little squares to canvas and nums to the col to be added to the smallbox. 

            // I need to add the cols to a larger column and check every time I go to the next box if the col from the previous box has the nums. be careful about adding to column1, column2, or column3. 

            ctx.rect(x, y, 60, 60);
            ctx.stroke();

            let num = generateNum();
            let bool = false;

            if (checkpoint %3 === 1 && !column1.flat().includes(num)) {
              bool = true;
            } else if (checkpoint %3 === 2 && !column2.flat().includes(num)) {
              bool = true;
            } else if (checkpoint %3 === 0 && !column3.flat().includes(num)) {
              bool = true;
            } else if (checkpoint % 3 === 0 && !column3.flat().includes(num)) {
              bool = true;
            } else if (checkpoint % 3 === 0 && !column3.flat().includes(num)) {
              bool = true;
            } else if (checkpoint % 3 === 0 && !column3.flat().includes(num)) {
              bool = true;
            } else if (checkpoint % 3 === 0 && !column3.flat().includes(num)) {
              bool = true;
            } else if (checkpoint % 3 === 0 && !column3.flat().includes(num)) {
              bool = true;
            } else if (checkpoint % 3 === 0 && !column3.flat().includes(num)) {
              bool = true;
            } 

            if (!box.includes(num) && bool) {
              col.push(num); box.push(num);
              ctx.fillText(num, x + 25, y + 45);
            } else {
              col.push(""); box.push("");
            }

            if (checkpoint === 1) {
              column1.push(col);
            } else if (checkpoint === 2) {
              column2.push(col);
            } else if (checkpoint === 3) {
              column3.push(col);
            };

            ctx.closePath();
          }
        }
        console.log(`Box: ${box}`);
        console.log(`Row 1: ${row1}`);
      }
    }
    let col1 = parsify(column1);
    let col2 = parsify(column2);
    let col3 = parsify(column3);
    console.log(col1);
    console.log(col2);
    console.log(col3);

    let rows = { 1: row1, 2: row2, 3: row3, 4: row4, 5: row5, 6: row6, 7: row7, 8: row8, 9: row9 };
    let cols = { 1: col1, 2: col2, 3: col3, 4: col4, 5: col5, 6: col6, 7: col7, 8: col8, 9: col9,  };

    for (i = 1; i <= 9; i++) {
      for (j = 0; j < 9; j++) {
        rows[i].push(cols[j + 1][i - 1]);
      }
    };

    
    console.log(`row 1: ${rows[1]}`);
    console.log(`row 2: ${rows[2]}`);
    console.log(`row 3: ${rows[3]}`);

  }

  drawRect();
    // drawLargeBox();

    // drawSmallBox(0, 180, 0, 180);


    // drawSmallBox();
    // Sudoku.drawLargeBox;
    // setInterval(drawRect, 40);
    
    
    </script>
    <input type="text"> </input>
  </div>
    
  </body>
  </html>